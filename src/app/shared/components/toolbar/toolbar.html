<!-- src/app/shared/components/toolbar/toolbar.html -->
<p-toolbar class="cheof-toolbar">
  <ng-template pTemplate="start">
    <div class="brand">
      <div class="cheof-title">CHEO' F</div>
      <div class="cheof-accent-line"></div>
    </div>
  </ng-template>

  <ng-template pTemplate="end">
    <div class="toolbar-actions">
      <!-- WEB -->
      <div class="cats-desktop">
        <p-button
          label="Pizzas sencillas"
          icon="pi pi-star"
          outlined="true"
          (click)="goToSencillas()"
          styleClass="cheof-theme-toggle cheof-btn-simple">
        </p-button>

        <p-button
          label="Pizzas especiales"
          icon="pi pi-bolt"
          outlined="true"
          (click)="goToEspeciales()"
          styleClass="cheof-theme-toggle cheof-btn-special">
        </p-button>
      </div>

      <!-- MÓVIL -->
      <div class="cats-mobile">
        <p-selectButton
          [(ngModel)]="pizzaCategory"
          [options]="pizzaCategoryOptions"
          optionLabel="label"
          optionValue="value"
          styleClass="cheof-cat-select"
          (onChange)="onCategoryChange($event.value)">
          <ng-template pTemplate="item" let-opt>
            <i [class]="opt.icon"></i>
            <span class="opt-label">{{ opt.label }}</span>
          </ng-template>
        </p-selectButton>
      </div>

      <!-- Carrito -->
      <p-button
        icon="pi pi-shopping-cart"
        outlined="true"
        styleClass="cheof-theme-toggle cheof-icon-btn">
      </p-button>

      <!-- Theme -->
      <p-button
        [icon]="themeIcon()"
        outlined="true"
        styleClass="cheof-theme-toggle cheof-icon-btn"
        (onClick)="toggleTheme()">
      </p-button>

      <!-- Login -->
      @if (!isAuthenticated()) {
        <p-button
          label="Iniciar sesión"
          icon="pi pi-user"
          outlined="true"
          (onClick)="loginDialog.open()"
          styleClass="cheof-theme-toggle login-desktop">
        </p-button>
      } @else {
        <p-button
          outlined="true"
          styleClass="cheof-theme-toggle user-chip-btn"
          (onClick)="logout()"
          title="Cerrar sesión">
          <ng-template pTemplate="content">
            @if (photoUrl() && !avatarBroken()) {
              <img
                class="avatar"
                [src]="photoUrl()!"
                alt="Foto de perfil"
                referrerpolicy="no-referrer"
                (error)="onAvatarError()"
              />
            } @else {
              <span class="avatar-fallback pi pi-user"></span>
            }
            <span class="name">{{ displayName() }}</span>
          </ng-template>
        </p-button>
      }

      <app-google-login-dialog #loginDialog></app-google-login-dialog>
    </div>
  </ng-template>
</p-toolbar>
